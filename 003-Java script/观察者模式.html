<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>观察者模式</title>
	<script>
		// (function(w){
		// 	function Teacher(){
		// 		this students=[];
		// 	}
			
		// 	Teacher.prototype={
		// 		constructor:Teacher,
		// 		__proto__:Object.prototype,
		// 	}
		// 	w.Teacher=Teacher;
		// })(window)
		// (function(w){
		// 	function Student(){

		// 	}
		// 	Students.prototype={
		// 		constructor:Student,
		// 		__proto__:Object.prototype,
		// 	}
		// 	w.Student=Student;
		// })(window)
			(function(w){
				function Teacher(name){
					this.name=name;
					this.students=[];
				}
				Teacher.prototype={
					constructor:Teacher,
					__proto__:Object.prototype,
					register:function(student){
						this.students.push(student);
					},
					publish:function(msg){
						for(var i=0;i<this.students.length;i++){
							this.students[i].listen(msg);
							/*调用学生的listen方法*/
						}
					}
				}
				w.Teacher=Teacher;
			})(window);
			(function(w){
				function Student(name,teacher){
					this.name=name;
					teacher.register(this)
					this.msg='';
				}
				Student.prototype={
					constructor:Student,
					__proto__:Object.prototype,
					listen:function(msg){
						this.msg=msg;
					}
				}
				w.Student=Student;
			})(window)
			var teacher1=new Teacher('liuruoyang');
			var s1=new Student('asd',teacher1);
			var s2=new Student('qwsf',teacher1);
			var s3=new Student('qwcas',teacher1);
			teacher1.publish('语文古诗词抄十遍')
			console.log(s1.name+s1.msg)
			console.log(s2.name+s2.msg)
			console.log(s3.name+s3.msg)
	</script>
</head>
<body>
	
</body>
</html>